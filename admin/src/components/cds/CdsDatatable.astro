<div
    class="relative overflow-x-auto bg-neutral-primary-soft shadow-xs rounded-base border border-default"
>
    <table class="w-full text-sm text-left rtl:text-right text-body">
        <thead
            class="text-sm text-body bg-neutral-secondary-medium border-b border-default-medium"
            id="renderColumnsCds"
        >            
        </thead>
        <tbody id="renderCds">
            <!-- Data rows will be inserted here by JavaScript -->
        </tbody>
    </table>
</div>
<script>
    const { DataBase } = await import("../../db/db.js");
    const db = new DataBase();
    const readData = () => {
        document.getElementById("renderCds")!.innerHTML = "";
        document.getElementById("renderColumnsCds")!.innerHTML = `
         <tr>                
            <th scope="col" class="px-6 py-3"> ID </th>
            <th scope="col" class="px-6 py-3"> Titulo </th>
            <th scope="col" class="px-6 py-3"> Precio </th>
            <th scope="col" class="px-6 py-3"> Stock </th>
            <th scope="col" class="px-6 py-3"> Acciones </th>
        </tr>
        `;
        db.read("cd").then((data) => {
            for (let item of data) {
                document.getElementById("renderCds")!.innerHTML += `
                <th scope="row" class="px-6 py-4 font-medium text-heading whitespace-nowrap">
                    ${item.id}
                </th>
                <td class="px-6 py-4">
                    ${item.title}
                </td>
                <td class="px-6 py-4">
                    ${item.price}
                </td>
                <td class="px-6 py-4">
                    ${item.stock}
                </td>
                <td class="px-6 py-4">
                    <a href="#" class="font-medium text-fg-brand hover:underline">Detail</a>
                </td>                    
                `;
            }
        });
    };
    //Aplicamos la lectura cuando se carga el componente
    readData();
    globalThis.addEventListener('cd-added', (event) => {
        if(event.detail){
            globalThis.worker.postMessage({

            })
            readData();
        }
    });
</script>
